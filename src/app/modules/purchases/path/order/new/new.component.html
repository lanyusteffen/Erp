<form [formGroup]="form" (ngSubmit)="onSubmit(form)" novalidate *ngIf="formReady">
  <div class="actions">
    <div class="form-group">
      <div class="form-group-label">
        <span class="required">*</span>
        <label>供应商：</label>
      </div>
      <div class="form-group-control">
        <app-customer-popup-selector (onConfirm)="selectCustomer($event)" formControlName="SupplierId" [ngModel]></app-customer-popup-selector>
      </div>
    </div>
    <div class="form-group">
      <div class="form-group-label">
        <label>采购员：</label>
      </div>
      <div class="form-group-control">
        <app-popup-selector-employee (onConfirm)="selectEmployee($event)" formControlName="EmployeeId" [ngModel]></app-popup-selector-employee>
      </div>
    </div>
    <div class="form-group">
      <div class="form-group-label">
        <label>采购部门：</label>
      </div>
      <div class="form-group-control">
        <app-department-selector [isEditing]="false" formControlName="DepartmentId" [ngModel]></app-department-selector>
      </div>
    </div>
    <div class="more">
      <div>
        <div class="form-group">
          <div class="form-group-label">
            <span class="required">*</span>
            <label>采购时间：</label>
          </div>
          <div class="form-group-control">
            <dp-date-picker theme="dp-material" mode="day" [config]="datePickerConfig" formControlName="PurchaseTime" [ngModel]></dp-date-picker> 
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="actions">
    <app-ui-button [style]="'primary'">
      导入
    </app-ui-button>
    <div class="more">
      <app-ui-checkbox formControlName="IsOpenDiscount" [inline]="false" [ngModel]>启用折扣</app-ui-checkbox>
      <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <app-ui-checkbox formControlName="IsOpenTax" [inline]="false" [ngModel]>启用税率</app-ui-checkbox>
    </div>
  </div>
  <app-ui-table>
    <thead>
      <th>操作</th>
      <th><span class="required">*</span>商品</th>
      <th>规格型号</th>
      <th>单位</th>
      <th>颜色</th>
      <th>尺码</th>
      <th><span class="required">*</span>采购数量(批量设置))</th>
      <th>采购单价(批量设置)</th>
      <th>采购金额</th>
      <th><span class="required">*</span>仓库</th>
    </thead>
    <tbody formArrayName="ItemList">
      <tr *ngFor="let item of purchaseItemList.controls; index as i" [formGroupName]="i">
        <td>
          <a class="text-success" (click)="addItem(i)"><i class="iconfont icon-add"></i></a>
          <a class="text-danger" (click)="removeItem(i)"><i class="iconfont icon-close"></i></a>
        </td>
        <td>
          <app-popup-selector-goods (onConfirm)="selectEmployee($event)" formControlName="GoodsId" [ngModel]></app-popup-selector-goods>
        </td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td><input type="text" formControlName="Quanlity" class="form-control" [ngModel]></td>
        <td><input type="text" formControlName="Price" class="form-control" [ngModel]></td>
        <td><input type="text" formControlName="PurchaseAmount" class="form-control" [ngModel]></td>
        <td><input type="text" formControlName="StorageId" class="form-control" [ngModel]></td>
      </tr>
    </tbody>
  </app-ui-table>
</form>
